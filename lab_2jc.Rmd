---
title: "W203 - Lab 2"
output:
  pdf_document: default
---

The mission of the American National Election Studies (ANES) is to advance the scientific study of public opinion and political behavior.  They accomplish this by developing and employing surveys that measure many variables and support rich hypothesis testing to assess voter turnout and vote choice.  The origins of their analysis started with a nation opinion survey conducted at the University of Michigan's Survey Research Center with the 1948 presidential election.  They continued to conduct surveys in every presidential election year through 2004.  In 2006, Stanford University's Institute for Research in the Social Sciences and the University of Michigan's Institute for Social Research developed a partnership which maintains and evolves the ANES.

Through the decades, Time Series studies conducted before and after presidential elections represent the focus of ANES studies.  Typically collection occurs via face-to-face interviews with respondents in their homes.  Pilot Studies are used to test and refine new questions for the Time Series.  These supporting studiens are conducted telephonically.  The data assessed in this lab is from the 2018 Pilot Study.


```{r}
setwd("~/Desktop/W203/homework/lab_2")
anes_data <- read.csv("~/Desktop/W203/homework/lab_2/anes_pilot_2018.csv")
```

```{r}
# master state code list from ANES errata site
state_code <- c(1,2,4,5,6,8,9,10,11,12,13,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,53,54,55,56)
state_name <- c("AL","AK","AZ","AR","CA","CO","CT","DE","DC","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY")
state_list <- data.frame(state_code, state_name, stringsAsFactors = FALSE)
# end master state code list

states <- anes_data$inputstate  # isolate state info from dataset
#length(states) # confirm length is 2500
#length(unique(states)) # confirm all states represented
#states[states %in% "-7"]<-"8"  # fix CO
#states[states %in% "-1"] <-"9" # fix CT
# state_count <- state_count[order(count(states)),]  # doesn't work right
# state_count <- data.frame(count(states))
#colnames(state_count) <- c("code", "count")
#state_count
```

__1. Do US voters have more respect for the police or for journalists?__

__Overview__
Within the ANES pilot questions, two specific ones directly support the posed question:\

  - How would you rate the police?\
  - How would you rate journalists?
  
Though these questions do not provide a holistic assessment of public opinion, the do provide a start point for an initial perspective on sentiment trends.  This will provide a start point to compare the public opinions captured in the pilot study.

The context of these questions was in 'feeling thermometers' which have a numberical range from 0 too 100.

__Initial Assessment__
```{r}
press <- anes_data$ftjournal
police <- anes_data$ftpolice
press_range <- range(press)
police_range <- range(police)
# press_range # [-7,100]
# police_range # [0,100]
press_data <- data.frame(police,press)
# subset(press_data, press == -7)
# press_data <- press_data[!subset(press_data, press == -7)]
press_data <- press_data[-c(51),] # delete row with -7 value
press_data <- press_data[-c(597),] # delete row with -7 value
```

The expected range of the data for each of these survey questions is [0,100].  The police data meets this criteria; however, the press data does not.  This question possesses negative values.  The data set was modified to include only values from 0 to 100, which reduced the overall number by 2, to 2498.

Though the data is numberical in nature, indivduals will use different scales when assessing their relative values on the thermometer.  Consequently, a linear relationship cannot be assumed to exist between the values.  This data feature supports the use of a non-parametric hypothesis test - namely the Wilcoxon Rank-Sum Test.  Employing the Hypothesis of Means for $H_O$ for this analysis capitalizes on the metric scale that the thermometer context provides.  

__Analysis__
```{r}
x <- press_data$police # police data
y <- press_data$press # press data
# length(x); length(y)
wilcox.test(x,y, paired = TRUE, mu = 0, conf.level = 0.95)
```
Practical Significance.  Spearman's rank correlation coefficient represents an effective way to assess the practical significance of the police and press analysis.  It provides a non-parametric measure of rank correlation, which aligns to the hypothesis test.

```{r}
cor(x,y, method = "spearman")
```

__2.  Are Republican voters older or younger than Democratic voters?__

Within the set of data collected on each participant was their age.  This variable, coupled with the question:  Generally speaking, do you usually think of yourself as a Democrat, a Republican,.....

Together, along with the assmption that surveyed individuals provided truthful data for these questions, a basis exists to initially assess the relative ages of Republican and Democratic individuals.
```{r}
party <- anes_data$pid1d
party_count <- length(party)
# hist(party)
year <- anes_data$birthyr
summary(year)
q2 <- data.frame(year, party)
# q2 <- data.frame(year, party, 2018 - year)
# names(q2)[3] <- "age"
q2 <- q2[which (q2$party == c(1,2)),] # [1,2,3] = [Dem, Rep, Independent] = [432,326,356]
# head(q2)
t.test(year ~ party, data = q2)
```

Use an independent sample t-test.

```{r}
library(effsize)
cohen.d(year ~ party, data = q2)
```
Extension.....should the screening criteria be placed with the question that asked if they voted in the last election?  About 2000 respondants said they voted in some fashion.  Field:  turnout18.  values of interest:  1,2,3.

__3. Do a majority of independent voters believe that the federal investigations of Russia election interference are baseless?__

```{r}

q3 <- data.frame(anes_data$pid1d, anes_data$turnout18, anes_data$russia16, anes_data$coord16)
colnames(q3) <- c("party", "voted", "russia_1", "russia_2")
q3_v1 <- q3[which (q3$russia_1 == c(1)),]
q3_v1 <- q3_v1[which(q3$party == c(3)),]
# q3_v1 <- q3_v1[which(q3$voted == c(1,2,3)),]
```
```{r}
q3_v2 <- q3[which(q3$party == c(3), q3$russia_2 == c(1)),]
head(q3_v2)
# q3_v1 <- q3_v1[which(q3$voted == c(1,2,3)),]
```



__4. Was anger or fear more effective at driving increases in voter turnout from 2016 to 2018?__


```{r}
# master state code list from ANES errata site
state_code <- c(1,2,4,5,6,8,9,10,11,12,13,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,53,54,55,56)
state_name <- c("AL","AK","AZ","AR","CA","CO","CT","DE","DC","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY")
state_list <- data.frame(state_code, state_name, stringsAsFactors = FALSE)
# end master state code list

#states <- anes_2018$inputstate  # isolate state info from dataset
#head(states, 50)
#length(states) # confirm length is 2500
#length(unique(states)) # confirm all states represented
#states[states %in% "-7"]<-"8"  # fix CO
#states[states %in% "-1"] <-"9" # fix CT
# state_count <- state_count[order(count(states)),]  # doesn't work right
# state_count <- data.frame(count(states))
#colnames(state_count) <- c("code", "count")
#state_count
```

